# 기본적인 도커 클라이언트 명령어

### 이미지 내부 파일 시스템 구조 보기

- `docker run <이미지> ls`
    - **run** : 컨테이너 생성 및 실행
    - **ls** : 현재 디랙토리의 파일 리스트 표출
- **동작원리**
    1. `Alpine` 이미지를 이용해서 컨테이너를 생성.
    2. 생성시 `Alpine` 이미지에 파일 스냅샷이 컨테이너 안에 있는 하드 디스크로 다운로드됨
    3. 이미지 이름 뒤에 다른 명령어를 더 붙여서 원래 이미지 안에 기본 커맨드는 무시가 되고 `ls` 명령어가 실행됨

### 컨테이너 나열

- **docker ps** : 실행중인 컨테이너 나열 및 `process status`
- **docker ps -a** : 모든 컨테이너 나열

1. **CONTAINER ID** : 컨테이너의 고유한 아이디 해쉬값. 실제로는 더욱 길지만 일부분만 표출.
2. **IMAGE** : 컨테이너 생성 시 사용한 도커 이미지
3. **COMMAND** : 컨테이너 시작 시 실행될 명령어. 
    - 대부분 이미지에 내장되어 있으므로 별도 설정이 필요 없음
4. **CREATED** : 컨테이너가 생성된 시간.
5. **STATUS** : 컨테이너의 상태입니다. 실행 중은 `Up`, 종료는 `Exited`, 일시정지 `Pause`
6. **PORTS** : 컨테이너가 개방한 포트와 호스트에 연결한 포트
    - 특별한 설정을 하지 않은 경우 출력되지 않음
7. **NAMES** : 컨테이너 고유한 이름. 
    - 컨테이너 생성 시 `--name` ****옵션으로 이름을 설정하지 않으면도커 엔진이 임의로 형용사와 명사를 조합해 설정.
    - `id`와 마찬가지로 중복이 안되고 `docker rename`명령어로 이름을 변경 가능
    

### 도커 컨테이너의 생명 주기

![Untitled](%E1%84%80%E1%85%B5%E1%84%87%E1%85%A9%E1%86%AB%E1%84%8C%E1%85%A5%E1%86%A8%E1%84%8B%E1%85%B5%E1%86%AB%20%E1%84%83%E1%85%A9%E1%84%8F%E1%85%A5%20%E1%84%8F%E1%85%B3%E1%86%AF%E1%84%85%E1%85%A1%E1%84%8B%E1%85%B5%E1%84%8B%E1%85%A5%E1%86%AB%E1%84%90%E1%85%B3%20%E1%84%86%E1%85%A7%E1%86%BC%E1%84%85%E1%85%A7%E1%86%BC%E1%84%8B%E1%85%A5%2036ed5ba4bdde473ca27e9b97e66ad77c/Untitled.png)

- **생성 및 실행**
    - `docker run <이미지 이름>` 커맨드는 컨테이너를 실행하는데 사용됨
        - 이를 `docker create <이미지 이름>` 과 `docker start <컨테이너 이름>` 으로 나눌 수 있음.
    - `docker create <이미지 이름>`
        - 컨테이너를 생성하고, 이미지의 파일 스냅샷을 컨테이너의 하드디스크에 저장
    - `docker start -a <컨테이너 아이디/이름>`
        - **-a** : 도커 실행시 프로그램에서 나오는 아웃풋을 화면에 출력
        - 시작시 실행될 명령어를 컨테이너에 저장후 컨테이너가 작동하도록 함.
- **중지**
    - `docker stop`, `docker kill`
        - `Stop`은 `Gracefully` 하게 중지를. 작업중인 것들을 완료하고 컨테이너를 중지
        - `Kill` 같은 경우는 `Stop`과 달리 어떠한 것도 기다리지 않고 바로 컨테이너를 중지
- **삭제**
    - **docker rm <아이디/ 이름>** : 실행 중인 것을 중지한 후 삭제가능
    - **docker rm `docker ps -a -q`** : 모든 컨테이너 삭제
    - **docker rmi <이미지 id>** : 이미지를 삭제
    - **docker system prune** : 컨테이너, 이미지, 네트워크 모두 삭제
    

### 실행중인 컨테이너 명령어 전달

- `docker exec <컨테이너 아이디>`
    - `docker run` 은 새로 컨테이너를 만들어서 실행
    - `docker exec` 은 이미 실행 중인 컨테이너에 명령어를 전달
- `docker exec -it <컨테이너 아이디> <명령어>`
    - **-it** : 명령어를 실행한 후에도 명령어를 사용할 수 있음.
        - `-it` : `interacive + terminal`
- `docker exec -it <컨테이너 아이디> sh`
    - **sh** : 컨테이너 안에서 터미널 환경을 구축